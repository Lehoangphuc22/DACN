(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4235],{16657:function(e,t){"use strict";t.Z=void 0;var n=function(){return null};t.Z=n},57019:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return n(93697)}])},62051:function(e,t,n){"use strict";var i=n(70865),o=n(96670),r=n(52322),s=n(2784),a=n(56580),l=n(92689),u=n(52944),c=n(5632);t.Z=function(e){var t=(e||{}).redirectUrl;return function(e){var n=function(n){var d=(0,c.useRouter)(),f=(0,u.C)((function(e){return e.user.accessToken})),_=(0,a.I0)();return(0,s.useEffect)((function(){f||(_(l.hI.setUserInfo(void 0)),_(l.hI.resetToken()),t?d.push(t):_(l.hI.login()))}),[f]),f?(0,r.jsx)(e,(0,o.Z)((0,i.Z)({},n),{isLoggedIn:!!f})):(0,r.jsx)(r.Fragment,{})};return e.getInitialProps&&(n.getInitialProps=e.getInitialProps),n.getLayout=e.getLayout,n.ssr=e.ssr,n.isSEODetail=e.isSEODetail,n.breadcrumb=e.breadcrumb,n.showBreadcrumb=e.showBreadcrumb,n}}},93697:function(e,t,n){"use strict";n.r(t),n.d(t,{dataKeyTab:function(){return R},default:function(){return L},keyTab:function(){return S}});var i=n(52322),o=n(81250),r=n(5632),s=n(2784),a=n(9911),l=n(65186),u=n(75100),c=n(56580),d=n(62051),f=n(40414),_=n(3306),v=n(3086),h=n(89075),p=n(16657),b=n(72779),m=n.n(b),g=n(18978),y=n(52944),k=n(26315),N=function(e){var t=e.bookingAllUser,n=e.changeBreadCrumb,s=(0,r.useRouter)(),a=(0,o.w_Y)(576),l=(0,y.C)((function(e){return e.total.loading}));return(0,i.jsx)(o.oqi,{loading:l,bookingAllUser:t,onFinish:function(e){(null===e||void 0===e?void 0:e.transactionId)&&s.push({pathname:k.d.booking.detail.path,query:{transactionId:null===e||void 0===e?void 0:e.transactionId}})},isMobile:a,changeBreadCrumb:n})},w=n(61523),C=n(97693),I=function(e){var t=e.patients,n=e.isMobile,s=e.changeBreadCrumb,a=(0,r.useRouter)(),l=(0,c.I0)(),u=(0,y.C)((function(e){return e.patient.loading}));return(0,i.jsx)(o.iC6,{patients:t,onDelete:function(e){var t=e.patient;(null===t||void 0===t?void 0:t.id)&&l(w.Z.unlinkPatient({id:null===t||void 0===t?void 0:t.id}))},onUpdate:function(e){var t=e.patient;l(C.Cv.setUpdatePatientId(null===t||void 0===t?void 0:t.id)),a.push((0,o.dlJ)(k.d.patient.update.path,void 0,{id:null===t||void 0===t?void 0:t.id,type:"general"}))},isMobile:n,changeBreadCrumb:s,loading:u})},x=n(98788),j=n(5163),U=n(33636),T=n(89969),Z=function(e){var t=e.notiOfUser,n=e.groupNotiOfUser,s=e.isMobile,a=e.changeBreadCrumb,l=(0,r.useRouter)(),u=(0,c.I0)(),d=(0,y.C)((function(e){return e.total.loading})),f=function(){var e=(0,x.Z)((function(){var e;return(0,j.__generator)(this,(function(t){switch(t.label){case 0:return[4,u(w.Z.setMarkViewedAllNoti())];case 1:return e=t.sent(),!s?[4,u(w.Z.getNotiOfUser())]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2,e]}}))}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,x.Z)((function(){var e;return(0,j.__generator)(this,(function(t){switch(t.label){case 0:return[4,u(w.Z.deleteAllNoti())];case 1:return e=t.sent(),[4,u(w.Z.getGroupNotiOfUser())];case 2:return t.sent(),[2,e]}}))}));return function(){return e.apply(this,arguments)}}();return(0,i.jsx)(o.bBC,{data:t,groupNotiOfUser:n,isMobile:s,loading:d,changeBreadCrumb:a,onNextLink:function(e){if(e.id){var t,n,i,o,r;u(w.Z.setMarkViewedNoti({id:e.id}));null===e||void 0===e||null===(t=e.eventData)||void 0===t||t.transactionId;var s,a=(0,U.PQ)(e);if(100===(null===e||void 0===e||null===(n=e.eventData)||void 0===n?void 0:n.type)&&(null===e||void 0===e||null===(i=e.eventData)||void 0===i?void 0:i.url)||"NOTIFICATION"===(null===e||void 0===e||null===(o=e.eventData)||void 0===o?void 0:o.typeId)&&(null===e||void 0===e||null===(r=e.eventData)||void 0===r?void 0:r.url))window.open((0,T.Ev)(null===e||void 0===e||null===(s=e.eventData)||void 0===s?void 0:s.url),"_blank");else l.push(a)}},onReadAll:f,onDelateAllNoti:_})},A=n(58674),D=n.n(A),P=function(e){var t=e.device,n=e.activeItem,r=e.patients,a=e.bookingAllUser,l=e.keyTab,u=e.data,c=e.notiOfUser,d=e.groupNotiOfUser,b=e.unreadNoti,y=e.isMobile,k=e.handleTabs,w=e.onCreatePatient,C=(e.changeBreadCrumb,n),x=function(e){if("notifications"===e.key)return(0,i.jsx)(f.Z,{style:{boxShadow:"none"},count:b})},j=(0,s.useState)("H\u1ed3 s\u01a1 b\u1ec7nh nh\xe2n"),U=(j[0],j[1]),T=(0,s.useState)(!1),A=(T[0],T[1],(0,s.useState)("records")),P=(A[0],A[1]);(0,s.useEffect)((function(){var e,t=u.filter((function(e){return C===e.key}));U(null===(e=t[0])||void 0===e?void 0:e.name),P(C)}),[C]);return(0,i.jsx)("div",{style:{background:"#FFFFFF",minHeight:"65vh"},children:(0,i.jsx)(o.ViR,{tag:"section",className:D().ThongTinHoSoCustom,children:(0,i.jsx)(_.Z,{className:D().rowInformation,children:(0,i.jsx)(v.Z,{span:24,children:(0,i.jsxs)(h.Z,{activeKey:C,defaultActiveKey:C,tabPosition:"left",className:D().tabUser,children:[(0,i.jsx)(p.Z,{tab:(0,i.jsx)("div",{className:D().header,children:(0,i.jsxs)("div",{className:D().btnCreate,onClick:w,children:[(0,i.jsx)(g.Bj$,{className:D().iconAdd}),"Th\xeam h\u1ed3 s\u01a1"]})})},""),null===u||void 0===u?void 0:u.map((function(e){return(0,i.jsxs)(p.Z,{tab:(0,i.jsx)("p",{className:m()(D().tabsItem,C===e.key&&D().active),onClick:function(){return k(e.key)},children:(0,i.jsxs)("div",{children:[e.icon,(0,i.jsxs)("span",{className:D().textTabs,children:["pc"===t.platform?e.name:e.mobileName," ",x(e)]})]})}),children:["records"===C&&y&&(0,i.jsx)("div",{className:D().header,children:(0,i.jsxs)("div",{className:D().btnCreate,onClick:w,children:[(0,i.jsx)(g.Bj$,{className:D().iconAdd}),"Th\xeam h\u1ed3 s\u01a1"]})}),(0,i.jsxs)("div",{className:D().listPatient,children:[e.key===l.records&&(0,i.jsx)(I,{patients:r}),e.key===l.bills&&(0,i.jsx)(N,{bookingAllUser:a}),e.key===l.notifications&&(0,i.jsx)(Z,{notiOfUser:c,groupNotiOfUser:d})]})]},e.key)}))]})})})})})},O=n(57452),B=n(95697),E=n.n(B),F=n(54573),L=(0,d.Z)()((function(e){var t=e.appInfo,n=(0,c.I0)(),a=(0,r.useRouter)(),l=(0,y.C)((function(e){return e.patient.listPatient})),u=(0,y.C)((function(e){return e.total.bookingAllUser})),d=(0,y.C)((function(e){return e.total.notiOfUser})),f=(0,y.C)((function(e){return e.total.unreadNotiCount})),_=(0,y.C)((function(e){return e.total.groupNotiOfUser})),v=(0,y.C)((function(e){return e.user.accessToken})),h=(0,F.d)().windowWidth<576,p=a.query.key||S.records;(0,s.useEffect)((function(){v&&(n(O.totalDataActions.getUnReadNotif()),n(O.totalDataActions.getNotiOfUser()))}),[v]),(0,s.useEffect)((function(){var e;switch(b(null===(e=R.find((function(e){return e.key===p})))||void 0===e?void 0:e.name),p){case S.records:n(C.Cv.getPatientByUserId());break;case S.bills:n(w.Z.getAllBooking());break;case S.notifications:n(w.Z.getGroupNotiOfUser())}}),[n,p]);var b=function(e){n((0,O.setBreadcrumb)([{title:e}]))};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(P,{device:{platform:"pc"},activeItem:p,patients:l,keyTab:S,isMobile:h,data:R,unreadNoti:f,handleTabs:function(e){a.push("/user?key=".concat(e))},bookingAllUser:u,notiOfUser:d,groupNotiOfUser:_,onCreatePatient:function(){n(C.Cv.setCreatePatientRedirectUrl((0,o.ZVt)())),"medpro"===t.appId?a.push((0,o.dlJ)(k.d.patient.createProfileChannel.path,"")):a.push((0,o.dlJ)(k.d.patient.create.path,t.appId))},changeBreadCrumb:b})})})),S={records:"records",bills:"bills",notifications:"notifications"},R=[{key:S.records,name:"H\u1ed3 s\u01a1 b\u1ec7nh nh\xe2n",mobileName:"H\u1ed3 s\u01a1",icon:(0,i.jsx)(u.oNL,{className:E().iconItem})},{key:S.bills,name:"Phi\u1ebfu kh\xe1m b\u1ec7nh",mobileName:"Phi\u1ebfu kh\xe1m",icon:(0,i.jsx)(a.iUk,{className:E().iconItem})},{key:S.notifications,name:"Th\xf4ng b\xe1o",mobileName:"",icon:(0,i.jsx)(l.zQi,{className:E().iconItem})}]},95697:function(e){e.exports={iconItem:"styles_iconItem__5NHfX",titlePage:"styles_titlePage__UAykJ"}},58674:function(e){e.exports={listPatient:"styles_listPatient__2OlAg",ThongTinHoSoCustom:"styles_ThongTinHoSoCustom__CEDK_",tabUser:"styles_tabUser__ZhC4x",recordsDropdow:"styles_recordsDropdow__4L_qi",topContent:"styles_topContent__8RT1D",heardeDropdown:"styles_heardeDropdown__ThvKz",records:"styles_records__641Q3",dropdown:"styles_dropdown__mm6nN",downIcon:"styles_downIcon__MFVXk",downIconActive:"styles_downIconActive__rtaw8",dropdowList:"styles_dropdowList___6AvG",itemDropdown:"styles_itemDropdown__9BlwN",textDropdownList:"styles_textDropdownList__zH9Zz",contenDropdown:"styles_contenDropdown__WzSqp",notifLenght:"styles_notifLenght__hbki_",btnCreate:"styles_btnCreate__BaF17",iconAdd:"styles_iconAdd__JqYPZ",ringSlower:"styles_ringSlower__qz5Qv",rowInformation:"styles_rowInformation__zuBcr",tabsItem:"styles_tabsItem__I5C6h",active:"styles_active__doGwY",textTabs:"styles_textTabs__2wnky",bouncy:"styles_bouncy__7n_NR"}}},function(e){e.O(0,[9774,2888,179],(function(){return t=57019,e(e.s=t);var t}));var t=e.O();_N_E=t}]);